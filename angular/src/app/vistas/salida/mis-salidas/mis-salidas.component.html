<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pagina Salidas</title>
</head>

<body>
  <app-menu></app-menu>
  <div class="container">
    <h1 style="text-align: center;">Mis salidas</h1>
    <table class="table table-striped table-bordered table-light">
      <thead class="thead-dark">
        <button class="btn btn-primary" routerLink="/nuevaSalidaSocio">Nueva salida</button>
        <tr>
          <th scope="col">Fecha Salida</th>
          <th scope="col">Destino</th>
          <th scope="col">Barco</th>
          <th scope="col">Patron</th>
          <th scope="col">Acciones</th>

        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let salida of listadoSalidas">
          <td>{{salida.fchHoraSalida}}</td>
          <td>{{salida.destino}}</td>
          <td>{{ getNombreBarco(salida.barco.idBarco) }}</td>
          <td>{{ getNombrePatron(salida.patron.idPatron) }}</td>
          <td>
            
            <button pButton pRipple  icon="pi pi-pencil" class="p-button-rounded p-button-warning" (click)="showEditModal(salida)"></button>
                      
            <button pButton pRipple icon="pi pi-trash" *ngIf="salida.idSalida" (click)="eliminarSalida(salida.idSalida)"></button>
             
           
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <p-dialog header="Editar Salida" [(visible)]="displayModal" [responsive]="true" [style]="{ 'width': '500px' }" >
    <form>
        <div class="modal-body">
            <div class="mb-3">
                <label for="fechaSalida" class="form-label">Fecha Salida</label>
                <input type="date" class="form-control" id="fechaSalida" name="fechaSalida"
                    [(ngModel)]="salidaSeleccionada.fchHoraSalida">
            </div>
            <div class="mb-3">
                <label for="destino" class="form-label">Destino</label>
                <input type="text" class="form-control" id="destino" name="destino"
                    [(ngModel)]="salidaSeleccionada.destino">
            </div>
            <div class="mb-3">
                <label for="idBarco" class="form-label">Barco</label>
                <select class="form-select" id="idBarco" name="idBarco" [(ngModel)]="idBarcoSeleccionado">
                    <option *ngFor="let barco of listadoBarcos" [value]="barco.idBarco">{{ barco.nombreBarco }}</option>
                </select>
            </div>
            <div class="mb-3">
                <label for="idPatron" class="form-label">Patr√≥n</label>
                <select class="form-select" id="idPatron" name="idPatron" [(ngModel)]="idPatronSeleccionado">
                    <option *ngFor="let patron of listadoPatrones" [value]="patron.idPatron">{{ patron.nombrePatron }}</option>
                </select>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" (click)="displayModal = false">Cancelar</button>
            <button type="button" class="btn btn-primary" (click)="editarSalida()">Guardar cambios</button>
        </div>
    </form>
</p-dialog>






</body>

</html>